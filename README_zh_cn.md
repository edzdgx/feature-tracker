# 特征标注工具
本工具可用于在视频中手动选取多个特征，逐帧对这些特征进行跟踪，最后将各特征每一帧的ROI生成为格式如下的txt文档：

| 帧号 | x1 | y1 | x2 | y2 |
| ------ | ------ | ------ | ------ | ------ |


### 安装包
本工具需要 *Python 3.7* 及更新版本来运行，为了使用 *OpenCV* 中的跟踪工具，需要安装如下版本：
```sh
$ pip3 install opencv-contrib-python==4.4.0
```

### 运行
运行时，需要输入两个变量:
* -i: 输入视频文件的路径
* -o: 输出文件的目标文件夹路径，默认为当前文件夹
```sh
$ python3 main.py -i <input_video> -o <output_directory>
```
输出的文本文件将被命名为 *videoname_x0_xy.txt*，(x0, y0)为被选中ROI的左上角坐标。

举个例子，如果如下命令被执行，有两个ROI在代码运行过程中被选取，且他们的(x0, y0)分别为(100, 200), (400, 400)：

```bash
$ python3 main.py -i video/example.mp4 -o output
```

那么该命令将会生成如下文件和文件夹：
```
.
├── video
│   ├── example.mp4
└── output
    ├── example_100_200.txt
    └── example_400_400.txt
```

### 使用方法
在代码运行后，不同的键盘/鼠标活动有不同的功能

| 键盘 | 功能 |
| ------ | ------ |
| 空格 SPACE | 暂停视频/播放视频 |
| 回车 ENTER | 确认选定的ROI |
| 删除 DELETE | 删除选定的ROI |
| ESC | 播放视频 |
| 'q' 和 'Q' | 终止程序 |
---
| 鼠标 | 功能 |
| ------ | ------ |
| 按下左键 | 选取ROI的起点 |
| 松开左键 | 选取ROI的终点 |
| 按下右键 | 选取想要删除的ROI |
